(this["webpackJsonpintro-to-solana"]=this["webpackJsonpintro-to-solana"]||[]).push([[0],{105:function(e,t,n){},116:function(e,t){},137:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var c=n(17),a=n.n(c),r=n(91),s=n.n(r),o=(n(105),n(0)),i=n(2),u=n(7),l=n(9),d=n(26),b=n(42),p=n.n(b),f=(n(137),n(78)),m=n(99),j=n(13),g=d.d.SystemProgram,h=(d.d.Keypair,Object.values(m._keypair.secretKey)),O=new Uint8Array(h),v=d.d.Keypair.fromSecretKey(O),x=new l.PublicKey("GE2E6QyuXkhRDzBNzYogSahdumMzh53zo7zu7skhdYJP"),y=Object(l.clusterApiUrl)("devnet"),w="processed",k=function(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(u.a)(r,2),m=s[0],h=s[1],O=Object(c.useState)([]),k=Object(u.a)(O,2),N=k[0],S=k[1],K=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t,n,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,!(n=t.solana)){e.next=12;break}if(!n.isPhantom){e.next=10;break}return console.log("Phantom wallet found!"),e.next=7,n.connect({onlyIfTrusted:!0});case 7:c=e.sent,console.log("Connected with Public Key:",c.publicKey.toString()),a(c.publicKey.toString());case 10:e.next=13;break;case 12:p()("To sign in, download a Phantom Wallet \ud83d\udc7b at https://phantom.app");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t,n,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window,!(n=t.solana)){e.next=8;break}return e.next=4,n.connect();case 4:c=e.sent,console.log("Connected with Public Key:",c.publicKey.toString()),a(c.publicKey.toString()),p.a.success("You're signed in!");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){console.log("Wallet Disconnected"),a(null),p.a.success("You've signed out!")},I=function(e){var t=e.target.value;h(t)},P=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.fetchIdl(x,E());case 2:return t=e.sent,e.abrupt("return",new d.a(t,x,E()));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=new l.Connection(y,w);return new d.b(e,window.solana,w)},C=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t,n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=E(),n=new d.a(f,x,t),console.log("ping"),e.next=6,n.rpc.startStuffOff({accounts:{baseAccount:v.publicKey,user:t.wallet.publicKey,systemProgram:g.programId},signers:[v]});case 6:return console.log("Created a new BaseAccount w/ address:",v.publicKey.toString()),e.next=9,M();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error creating BaseAccount account:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),L=function(e){return e?e.substring(0,4)+"....."+e.substring(40):""},M=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t,n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P();case 3:return t=e.sent,e.next=6,t.account.baseAccount.fetch(v.publicKey);case 6:n=e.sent,console.log("Got the account",n),S(n.gifList),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error in getGifList: ",e.t0),S(null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){var t,n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==m.length){e.next=3;break}return console.log("No gif link given!"),e.abrupt("return");case 3:return h(""),console.log("Gif link:",m),e.prev=5,t=E(),n=new d.a(f,x,t),e.next=10,n.rpc.addGif(m,{accounts:{baseAccount:v.publicKey,user:t.wallet.publicKey}});case 10:return console.log("GIF successfully sent to program",m),e.next=13,M();case 13:p.a.success("GIF Sent!"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log("Error sending GIF:",e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=function(){var e=Object(i.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("load",e),function(){return window.removeEventListener("load",e)}}),[]),Object(c.useEffect)((function(){n&&(console.log("Fetching GIF list..."),M())}),[n]),Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:n?"authed-container":"container",children:[Object(j.jsx)(b.Toaster,{toastOptions:{className:"",duration:3e3,style:{border:"1px solid #713200",padding:"16px",color:"#713200"}}}),Object(j.jsxs)("div",{className:"header-container",children:[!n&&Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("button",{className:"cta-button connect-wallet-button",onClick:A,children:"SIGN IN"}),Object(j.jsx)("p",{className:"header",children:"Scene Portal"}),Object(j.jsx)("p",{className:"sub-header",children:"Your favorite scenes, on the blockchain"}),Object(j.jsx)("div",{className:"moon"}),Object(j.jsx)("div",{className:"kiki"})]}),n&&(null===N?Object(j.jsx)("div",{className:"connected-container",children:Object(j.jsx)("button",{className:"cta-button submit-gif-button",onClick:C,children:"Do One-Time Initialization For GIF Program Account"})}):Object(j.jsxs)("div",{className:"connected-container",children:[Object(j.jsx)("p",{className:"connected-header",children:"SCENE PORTAL"}),Object(j.jsxs)("button",{className:"cta-button disconnect-wallet-button",onClick:G,children:["SIGN OUT ",L(n)]}),Object(j.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),z()},children:[Object(j.jsx)("input",{type:"text",placeholder:"post your favorite film/tv scene",value:m,onChange:I}),Object(j.jsx)("button",{type:"submit",className:"cta-button submit-gif-button",children:"SUBMIT"})]}),Object(j.jsx)("div",{className:"gif-grid",children:N.map((function(e,t){return Object(j.jsxs)("div",{className:"gif-item",children:[Object(j.jsx)("img",{className:"gif-image",src:e.gifLink,alt:e.gifLink}),Object(j.jsxs)("div",{className:"address-tag",children:[Object(j.jsx)("img",{className:"phantom-image",src:"https://res.cloudinary.com/crunchbase-production/image/upload/c_lpad,f_auto,q_auto:eco,dpr_1/sqzgmbkggvc1uwgapeuy",alt:"Phantom Wallet"}),Object(j.jsxs)("p",{className:"address",children:["@",L(e.userAddress.toString())]})]})]},t)}))})]}))]})]})})};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root"))},78:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"solanagrid","instructions":[{"name":"startStuffOff","accounts":[{"name":"baseAccount","isMut":true,"isSigner":true},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"addGif","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":true}],"args":[{"name":"gifLink","type":"string"}]}],"accounts":[{"name":"BaseAccount","type":{"kind":"struct","fields":[{"name":"totalGifs","type":"u64"},{"name":"gifList","type":{"vec":{"defined":"ItemStruct"}}}]}}],"types":[{"name":"ItemStruct","type":{"kind":"struct","fields":[{"name":"gifLink","type":"string"},{"name":"userAddress","type":"publicKey"}]}}],"metadata":{"address":"GPoC1vxA1ZYMDADGdt6qWW6jxtrQphfX4JziaCYdoFkA"}}')},93:function(e,t){},97:function(e,t){},99:function(e){e.exports=JSON.parse('{"_keypair":{"publicKey":{"0":105,"1":72,"2":167,"3":156,"4":135,"5":144,"6":198,"7":31,"8":18,"9":201,"10":119,"11":236,"12":62,"13":189,"14":118,"15":109,"16":232,"17":25,"18":229,"19":36,"20":15,"21":246,"22":64,"23":228,"24":205,"25":182,"26":178,"27":204,"28":35,"29":4,"30":212,"31":53},"secretKey":{"0":15,"1":152,"2":186,"3":155,"4":54,"5":155,"6":159,"7":75,"8":62,"9":96,"10":131,"11":79,"12":78,"13":135,"14":100,"15":173,"16":72,"17":60,"18":71,"19":90,"20":11,"21":180,"22":222,"23":46,"24":169,"25":249,"26":54,"27":6,"28":34,"29":61,"30":107,"31":89,"32":105,"33":72,"34":167,"35":156,"36":135,"37":144,"38":198,"39":31,"40":18,"41":201,"42":119,"43":236,"44":62,"45":189,"46":118,"47":109,"48":232,"49":25,"50":229,"51":36,"52":15,"53":246,"54":64,"55":228,"56":205,"57":182,"58":178,"59":204,"60":35,"61":4,"62":212,"63":53}}}')}},[[139,1,2]]]);
//# sourceMappingURL=main.43506cb3.chunk.js.map